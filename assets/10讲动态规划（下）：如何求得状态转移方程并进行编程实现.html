<html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover"> <meta name="format-detection" content="telephone=no"> <style>#watermark{position:relative;overflow:hidden}#watermark .x{position:absolute;top:800;left:400;color:#30f;font-size:50px;pointer-events:none;opacity:.3;filter:Alpha(opacity=50);-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg)}</style> <style>html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6,.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo h1,.typo-h1{font-size:2em}.typo h2,.typo-h2{font-size:1.8em}.typo h3,.typo-h3{font-size:1.6em}.typo h4,.typo-h4{font-size:1.4em}.typo h5,.typo h6,.typo-h5,.typo-h6{font-size:1.2em}.typo ul,.typo-ul{margin-left:1.3em;list-style:disc}.typo ol,.typo-ol{list-style:decimal;margin-left:1.9em}.typo li ol,.typo li ul,.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul{margin-bottom:.8em;margin-left:2em}.typo li ul,.typo-ol ul,.typo-ul ul{list-style:circle}.typo table caption,.typo table td,.typo table th,.typo-table td,.typo-table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo table th,.typo-table th{background:#fbfbfb}.typo table thead th,.typo-table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo em,.typo-em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:0 0}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:transparent}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:transparent}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style> <style>.button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}</style> <style>.comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}</style> </head> <body> <div id="app"> <div data-v-87ffcada="" class="article" id="watermark"> <p class="x">更多课程请加QQ群170701297</p> <div data-v-87ffcada="" class="main main-app"> <h1 data-v-87ffcada="" class="article-title pd"> 10讲动态规划（下）：如何求得状态转移方程并进行编程实现 </h1> <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada="" src="https://static001.geekbang.org/resource/image/e1/c1/e121e75bc14b6c724698b71a29a4bec1.jpg"> <div data-v-87ffcada="" id="article-content" class=""> <div class="text"> <p>你好，我是黄申。</p><p>上一节，我从查询推荐的业务需求出发，介绍了编辑距离的概念，今天我们要基于此，来获得状态转移方程，然后才能进行实际的编码实现。</p><h2>状态转移方程和编程实现</h2><p>上一节我讲到了使用状态转移表来展示各个子串之间的关系，以及编辑距离的推导。不过，我没有完成那张表格。现在我把它补全，你可以和我的结果对照一下。</p><p><img src="https://static001.geekbang.org/resource/image/26/8c/265fb5d134bfebb2fd2cf712f759468c.png" alt=""></p><p>这里面求最小值的min函数里有三个参数，分别对应我们上节讲的三种情况的编辑距离，分别是：替换、插入和删除字符。在表格的右下角我标出了两个字符串的编辑距离1。</p><p>概念和分析过程你都理解了，作为程序员，最终还是要落脚在编码上，我这里带你做些编码前的准备工作。</p><p>我们假设字符数组A[]和B[]分别表示字符串A和B，A[i]表示字符串A中第i个位置的字符，B[i]表示字符串B中第i个位置的字符。二维数组d[,]表示刚刚用于推导的二维表格，而d[i,j]表示这张表格中第i行、第j列求得的最终编辑距离。函数r(i, j)表示替换时产生的编辑距离。如果A[i]和B[j]相同，函数的返回值为0，否则返回值为1。</p><p>有了这些定义，下面我们用迭代来表达上述的推导过程。</p><ul> <li> <p>如果i为0，且j也为0，那么d[i, j]为0。</p> </li> <li> <p>如果i为0，且j大于0，那么d[i, j]为j。</p> </li> <li> <p>如果i大于0，且j为0，那么d[i, j]为i。</p> </li> <li> <p>如果i大于0，且 j大于0，那么d[i, j]=min(d[i-1, j] + 1, d[i, j-1] + 1, d[i-1, j-1] + r(i, j))。</p> </li> </ul><p>这里面最关键的一步是d[i, j]=min(d[i-1, j] + 1, d[i, j-1] + 1, d[i-1, j-1] + r(i, j))。这个表达式表示的是动态规划中从上一个状态到下一个状态之间可能存在的一些变化，以及基于这些变化的最终决策结果。我们把这样的表达式称为<strong>状态转移方程</strong>。我上节最开始就说过，在所有动态规划的解法中，状态转移方程是关键，所以你一定要掌握它。</p><p>有了状态转移方程，我们就可以很清晰地用数学的方式，来描述状态转移及其对应的决策过程，而且，有了状态转移方程，具体的编码其实就很容易了。基于编辑距离的状态转移方程，我在这里列出了一种编码的实现，你可以看看。</p><p>我们首先要定义函数的参数和返回值，你需要注意判断一下a和b为null的情况。</p><pre><code> public class Lesson10_1 {
	
	/**
    * @Description:	使用状态转移方程，计算两个字符串之间的编辑距离
    * @param a-第一个字符串，b-第二个字符串
    * @return int-两者之间的编辑距离
    */
	
	public static int getStrDistance(String a, String b) {
		
		if (a == null || b == null) return -1;
</code></pre><p>然后，初始化状态转移表。我用int型的二维数组来表示这个状态转移表，并对i为0且j大于0的元素，以及i大于0且j为0的元素，赋予相应的初始值。</p><pre><code>  // 初始用于记录化状态转移的二维表
		int[][] d = new int[a.length() + 1][b.length() + 1];
		
		// 如果i为0，且j大于等于0，那么d[i, j]为j
		for (int j = 0; j &lt;= b.length(); j++) {
			d[0][j] = j;
		}
		
		// 如果i大于等于0，且j为0，那么d[i, j]为i
		for (int i = 0; i &lt;= a.length(); i++) {
			d[i][0] = i;
		}
</code></pre><p>我这里实现的时候，i和j都是从0开始，所以我计算的d[i+1, j+1]，而不是d[i, j]。而d[i+1, j+1] = min(d[i, j+1] + 1, d[i+1, j] + 1, d[i, j] + r(i, j)。</p><pre><code>  // 实现状态转移方程
		// 请注意由于Java语言实现的关系，代码里的状态转移是从d[i, j]到d[i+1, j+1]，而不是从d[i-1, j-1]到d[i, j]。本质上是一样的。
		for (int i = 0; i &lt; a.length(); i++) {
			for (int j = 0; j &lt; b.length(); j++) {
				
				int r = 0;
				if (a.charAt(i) != b.charAt(j)) {
					r = 1;
				} 
				
				int first_append = d[i][j + 1] + 1;
				int second_append = d[i + 1][j] + 1;
				int replace = d[i][j] + r;
				
				int min = Math.min(first_append, second_append);
				min = Math.min(min, replace);
				d[i + 1][j + 1] = min;
				
			}
		}
		
		return d[a.length()][b.length()];
				
	}

}
</code></pre><p>最后，我们用测试代码测试不同字符串之间的编辑距离。</p><pre><code>public static void main(String[] args) {
  // TODO Auto-generated method stub
  System.out.println(Lesson10_1.getStrDistance(&quot;mouse&quot;, &quot;mouuse&quot;));

 }
</code></pre><p>从推导的表格和最终的代码可以看出，我们相互比较长度为m和n的两个字符串，一共需要求mxn个子问题，因此计算量是mxn这个数量级。和排列法的m^n相比，这已经降低太多太多了。</p><p>我们现在可以快速计算出编辑距离，所以就能使用这个距离作为衡量字符串之间相似度的一个标准，然后就可以进行查询推荐了。</p><p>到这里，使用动态规划来实现的编辑距离其实就讲完了。我把两个字符串比较的问题，分解成很多子串进行比较的子问题，然后使用状态转移方程来描述状态（也就是子问题）之间的关系，并根据问题的定义，保留最小的值作为当前的编辑距离，直到过程结束。</p><p>如果我们使用动态规划法来实现编辑距离的测算，那就能确保查询推荐的效率和效果。不过，基于编辑距离的算法也有局限性，它只适用于拉丁语系的相似度衡量，所以通常只用于英文或者拼音相关的查询。如果是在中文这种亚洲语系中，差一个汉字（或字符）语义就会差很远，所以并不适合使用基于编辑距离的算法。</p><h2>实战演练：钱币组合的新问题</h2><p>和排列组合等穷举的方法相比，动态规划法关注发现某种最优解。如果一个问题无需求出所有可能的解，而是要找到满足一定条件的最优解，那么你就可以思考一下，是否能使用动态规划来降低求解的工作量。</p><p>还记得之前我们提到的新版舍罕王奖赏的故事吗？国王需要支付一定数量的赏金，而宰相要列出所有可能的钱币组合，这使用了排列组合的思想。如果这个问题再变化为“给定总金额和可能的钱币面额，能否找出钱币数量最少的奖赏方式？”，那么我们是否就可以使用动态规划呢？</p><p>思路和之前是类似的。我们先把这个问题分解成很多更小金额的子问题，然后试图找出状态转移方程。如果增加一枚钱币c，那么当前钱币的总数量就是增加c之前的钱币总数再加上当前这枚。举个例子，假设这里我们有三种面额的钱币，2元、3元和7元。为了凑满100元的总金额，我们有三种选择。</p><p>第一种，总和98元的钱币，加上1枚2元的钱币。如果凑到98元的最少币数是$x_{1}$，那么增加一枚2元后就是($x_{1}$ + 1)枚。</p><p>第二种，总和97元的钱币，加上1枚3元的钱币。如果凑到97元的最少币数是$x_{2}$，那么增加一枚3元后就是($x_{2}$ + 1)枚。</p><p>第三种，总和93元的钱币，加上1枚7元的钱币。如果凑到93元的最少币数是$x_{3}$，那么增加一枚7元后就是($x_{3}$ + 1)枚。</p><p><img src="https://static001.geekbang.org/resource/image/e5/d9/e5a9b9e6d931049bfae92ead29e37cd9.jpg" alt=""></p><p>比较一下以上三种情况的钱币总数，取最小的那个就是总额为100元时，最小的钱币数。换句话说，由于奖赏的总金额是固定的，所以最后选择的那枚钱币的面额，将决定到上一步为止的金额，同时也决定了上一步为止钱币的最少数量。根据这个，我们可以得出如下状态转移方程：</p><p><img src="https://static001.geekbang.org/resource/image/d8/27/d81e704031156e605b61610ef681c427.jpg" alt=""></p><p>其中，c[i]表示总额为i的时候，所需要的最少钱币数，其中j=1,2,3,…,n，表示n种面额的钱币，value[j]表示第j种钱币的面额。c[i - values(j)]表示选择第j种钱币的时候，上一步为止最少的钱币数。需要注意的是，i - value(j)需要大于等于0，而且c[0] = 0。</p><p>我这里使用这个状态转移方程，做些推导，具体的数据你可以看下面这个表格。表格每一行表示奖赏的总额，前3列表示3种钱币的面额，最后一列记录最少的钱币数量。表中的“/”表示不可能，或者说无解。</p><p><img src="https://static001.geekbang.org/resource/image/e7/58/e78354fe2f577d07649882fed69bd358.png" alt=""></p><p>这张状态转移表同样可以帮助你来理解状态转移方程的正确性。一旦状态转移方程确定了，要编写代码来实现就不难了。</p><h2>小结</h2><p>通过这两节的内容，我讲述了动态规划主要的思想和应用。如果仅仅看这两个案例，也许你觉得动态规划不难理解。不过，在实际应用中，你可能会产生这些疑问：什么时候该用动态规划？这个问题可以用动态规划解决啊，为什么我没想到？我这里就讲一些我个人的经验。</p><p>首先，如果一个问题有很多种可能，看上去需要使用排列或组合的思想，但是最终求的只是某种最优解（例如最小值、最大值、最短子串、最长子串等等），那么你不妨试试是否可以使用动态规划。</p><p>其次，状态转移方程是个关键。你可以用状态转移表来帮助自己理解整个过程。如果能找到准确的转移方程，那么离最终的代码实现就不远了。当然，最好的方式，还是结合工作中的项目，不断地实践，尝试，然后总结。</p><p><img src="https://static001.geekbang.org/resource/image/7e/5b/7e084bc699b4939b78226718756fd65b.jpg" alt=""></p><h2>思考题</h2><p>对于总金额固定、找出最少钱币数的题目，用循环或者递归的方式该如何进行编码呢？</p><p><span class="orange">欢迎在留言区交作业，并写下你今天的学习笔记。你可以点击“请朋友读”，把今天的内容分享给你的好友，和他一起精进。</span></p><p><img src="https://static001.geekbang.org/resource/image/ff/4b/ff788ad682d27efbdf823b0af52e114b.jpg" alt=""></p> </div> </div> </div> <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span data-v-87ffcada="">精选留言</span></h2> <ul data-v-87ffcada=""> <li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/6b/5e/b76e7a79.jpg" class="avatar"> <div class="info"> <div class="hd"><span class="username">我心留</span> </div> <div class="bd">public class Lesson10_2 {<br>&#47;**	<br> * 动态规划求最小钱币数	<br> * @param c 用一维数组记录每一步的总金额 * @param value 用一维数组记录三种面额的纸币	<br> * @return <br> *&#47;	<br>public static int getMinMoney(int[] c, int[] value) {<br> int[] t = new int[3]; <br> for (int i = 0; i &lt; c.length; i++) { <br> for (int j = 0; j &lt; value.length; j++) { <br> if (i - value[j] &gt;= 0) { <br> t[j] = c[i - value[j]] + 1; <br> } <br> } <br> int min = Math.min(t[0], t[1]); <br> min = Math.min(min, t[2]); <br> c[i] = min; <br> } <br> return c[c.length - 1];<br>}	<br>public static void main(String[] args) { <br> int[] c = new int[100]; <br> int[] value = new int[] { 2, 3, 7 }; <br> System.out.println(getMinMoney(c, value)+1);	<br> }<br>}<br>老师看一下代码对吗，运行结果是15 <br></div> <span class="time">2019-01-05 09:22</span> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg" class="avatar"> <div class="info"> <div class="hd"><span class="username">mickey</span> </div> <div class="bd">package Part01;<br><br>import java.util.ArrayList;<br>import java.util.Arrays;<br>import java.util.List;<br><br>public class Lesson10_ex {<br>	public static void main(String[] args) {<br> switchMoney(2, 3, 7, 100);<br>	}<br><br>	private static void switchMoney(int mz1, int mz2, int mz3, int total) {<br> List&lt;Integer[]&gt; list = new ArrayList&lt;Integer[]&gt;();<br> int s1 = total &#47; mz1;<br> int s2 = total &#47; mz2 + 1;<br> int s3 = total &#47; mz3 + 1;<br> for (int i = 0; i &lt;= s1; i++) {<br> for (int j = 0; j &lt;= s2; j++) {<br> for (int k = 0; k &lt;= s3; k++) {<br> if (mz1 * i + mz2 * j + mz3 * k == 100) {<br> list.add(new Integer[] { i, j, k });<br> }<br> }<br> }<br> }<br> Integer[] result = new Integer[3];<br> int min = total;<br> for (Integer[] integers : list) {<br> int sum = 0;<br> for (Integer num : integers) {<br> sum += num;<br> }<br> if (min &gt; sum) {<br> min = sum;<br> result = integers;<br> }<br> }<br> System.out.println(&quot;最小数：&quot; + min);<br> System.out.println(Arrays.toString(result));<br>	}<br>}<br> <br></div> <span class="time">2019-01-04 16:53</span> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="" class="avatar"> <div class="info"> <div class="hd"><span class="username">菩提</span> </div> <div class="bd">思考题编码：<br>public static int least_count(int num) {<br> if (num &lt; 0)<br> return -1;<br> int len = num;<br> if (num &lt; 9)<br> len = 8;<br> int[] c = new int[len + 1];<br> c[0] = -1;<br> c[1] = -1;<br> c[2] = 1;<br> c[3] = 1;<br> c[4] = 2;<br> c[5] = 2;<br> c[6] = 2;<br> c[7] = 1;<br> c[8] = 3;<br><br> if (num &lt; 9) {<br> return c[num];<br> }<br><br> for (int i = 9; i &lt;= num; i++) {<br> int a = c[i - 2] + 1;<br> int b = c[i - 3] + 1;<br> int min = Math.min(a, b);<br> int m = c[i - 7] + 1;<br> min = Math.min(min, m);<br> c[i] = min;<br> }<br><br> return c[num];<br>	}<br><br>	public static void main(String[] args) {<br> System.out.println(least_count(100));<br>	}<br><br>运行结果： 15 <br></div> <span class="time">2019-01-06 20:59</span> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="" class="avatar"> <div class="info"> <div class="hd"><span class="username">梅坊帝卿</span> </div> <div class="bd">按照面值排序优先取最大的方法 不一定能取到解 除非有万能的面额1 比如 2 5 7 总数15 <br></div> <span class="time">2019-01-04 16:48</span> <div class="reply"> <div class="reply-hd"><span>作者回复</span></div> <p class="reply-content">是的 可能无解👍</p> <p class="reply-time">2019-01-05 08:38</p> </div> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOc0n02eNKflX5ey4TYl1NBfb0kicc20AgayEAGDYylalqHnLTeqMnaJ2iaZsLVmqEo0T0YViadU9Ig/132" class="avatar"> <div class="info"> <div class="hd"><span class="username">lianlian</span> </div> <div class="bd">方法1，动态规划，最快。方法2递归有点慢，方法三递归，超级慢。在aim数值大于30的时候，三种写法，在我电脑速度快慢特别明显。用2元,3元,5元去找开100块，用递归方法，我的电脑要等到地老天荒O(∩_∩)O哈哈~<br>#include&lt;iostream&gt;<br>#include&lt;vector&gt;<br><br>using namespace std;<br><br>int dp_solve(int *a, int n, int aim){<br>	vector&lt;vector&lt;int&gt;&gt; dp(n, vector&lt;int&gt;(aim+1, 0));<br><br>	for(int j = 1; j &lt;= aim; j++){<br> dp[0][j] = INT_MAX;<br> if(j &gt;= a[0] &amp;&amp; dp[0][j - a[0]] != INT_MAX)<br> dp[0][j] = dp[0][j - a[0]] + 1;<br>	}<br><br>	for(int i = 1; i &lt; n; i++){<br> for(int j = 1; j &lt;= aim; j++)<br> {<br> int tmp = INT_MAX;<br> if(j - a[i] &gt;= 0 &amp;&amp; dp[i][j - a[i]] != INT_MAX)<br> tmp = dp[i][j - a[i]] + 1;<br><br> dp[i][j] = min(dp[i-1][j], tmp);<br> }<br>	}<br><br>	return dp[n-1][aim] == INT_MAX ? -1 : dp[n-1][aim];<br>}<br><br>int min_res = INT_MAX;<br>void recur_solve(int *a, int n, int aim, int k){<br>	if(aim == 0){<br> min_res = min(min_res, k);<br> return;<br>	}<br>	if(aim &lt; 0)<br> return;<br>	for(int i = 0; i &lt; n; i++){<br> aim -= a[i];<br> k++;<br> recur_solve(a, n, aim, k);<br> aim += a[i];<br> k--;<br>	}<br>}<br><br>int min_res2 = INT_MAX;<br>void recur_solve2(int *a, int n, int aim, vector&lt;int&gt; res){<br>	if(aim == 0){<br> int size = res.size();<br> min_res2 = min(min_res2, size);<br> return;<br>	}<br>	if(aim &lt; 0)<br> return;<br>	for(int i = 0; i &lt; n; i++){<br> res.push_back(a[i]);<br> recur_solve2(a, n, aim - a[i], res);<br> res.pop_back();<br>	}<br>}<br><br>int main(){<br>	int a[] = {2,3,7};<br>	int sum = 25;<br>	&#47;***dp最快**&#47;<br>	cout &lt;&lt; dp_solve(a, 3, sum) &lt;&lt; endl;<br><br>	&#47;***这种递归有点久**&#47;<br>	recur_solve(a, 3, sum, 0);<br>	cout &lt;&lt; min_res &lt;&lt; endl;<br><br>	&#47;**这个太久了**&#47;<br>	vector&lt;int&gt; result;<br>	recur_solve2(a, 3, sum, result);<br>	cout &lt;&lt; min_res2 &lt;&lt; endl;<br>	return 0;<br>} <br></div> <span class="time">2019-01-04 14:40</span> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/e4/f0/82281239.jpg" class="avatar"> <div class="info"> <div class="hd"><span class="username">Ricky</span> </div> <div class="bd">void getLeastReward(const int *amount, int n, int target, int &amp;least,<br> vector&lt;int&gt; &amp;result, vector&lt;int&gt; &amp;tmp) {<br><br> if (target &lt; 0) return;<br> if (target == 0) {<br> if (tmp.size() &lt; least) {<br> least = tmp.size();<br> result = tmp;<br> }<br> }<br><br> for (int i = 0; i &lt; n; ++i) {<br> if (target &lt; amount[i]) continue;<br> int j = target &#47; amount[i];<br> vector&lt;int&gt; rs = tmp;<br> while (j &gt; 0) {<br> rs.push_back(amount[i]);<br> j--;<br> }<br> getLeastReward(amount, n, target % amount[i], least, result, rs);<br> }<br>}<br><br>void getLeastReward(const int *amount, int n, int target) {<br> if (target &lt;= 0) return;<br> vector&lt;int&gt; rs, tmp;<br> int least = INT16_MAX;<br> getLeastReward(amount, n, target, least, rs, tmp);<br> cout &lt;&lt; &quot;\nThe least amount is &quot; &lt;&lt; least &lt;&lt; endl;<br> cout &lt;&lt; &quot;Details are &quot;;<br> for (int x: rs) {<br> cout &lt;&lt; x &lt;&lt; &quot; &quot;;<br> }<br> cout &lt;&lt; endl;<br>}<br><br>主程序<br>int main() {<br> int amount[] = {2, 3, 7};<br> int target = 100;<br> getLeastReward(amount, 3, target);<br> return 0;<br>}<br>结果<br>The least amount is 15<br>Details are 7 7 7 7 7 7 7 7 7 7 7 7 7 7 2<br> <br></div> <span class="time">2019-01-10 19:49</span> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/1d/7d/e8617ccc.jpg" class="avatar"> <div class="info"> <div class="hd"><span class="username">清如許</span> </div> <div class="bd">https:&#47;&#47;github.com&#47;somenzz&#47;geekbang&#47;blob&#47;master&#47;mathOfProgramer&#47;chapter10_dynamic_programming.py<br>实现了循环和递归，循环的方式快，递归的方式特别慢。<br>个人感觉递归是从后往前推导的，每一步的结果不论是否最优都保存在堆栈中，都占用了内存空间，算法上已经不属于动态规划。<br><br>循环的方式不论 num 有多大，仅占用了7个变量的内存空间，每一步都保留上一步的最优解，因此效率较高，而且可以方便地打印出有最小数量的组合。<br><br>循环方式的代码的输出如下：<br> 1 -&gt; None<br> 2 -&gt; (1, [2])<br> 3 -&gt; (1, [3])<br> 4 -&gt; (2, [2, 2])<br> 5 -&gt; (2, [2, 3])<br> 6 -&gt; (2, [3, 3])<br> 7 -&gt; (1, [7])<br> 8 -&gt; (3, [2, 3, 3])<br> 9 -&gt; (2, [2, 7])<br> 10 -&gt; (2, [3, 7])<br> 100 -&gt; (15, [2, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7])<br><br><br> <br></div> <span class="time">2019-01-07 12:32</span> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/1d/7d/e8617ccc.jpg" class="avatar"> <div class="info"> <div class="hd"><span class="username">清如許</span> </div> <div class="bd">看了【我心留】的代码，这里的空间复杂度是O(n)，其实通过老师给出的那个表格可以看出，只要保留中间三个变量即可，因此可以改写成空间复杂度是O(1）的代码，而且，最好能打印出最小币数量的组合，比如 100 = 7+7+7+7+7+ 7+7+7+7+7+ 7+7+7+7 +2，感觉是可行的，有点烧脑，我暂时还没有写出来。<br> <br></div> <span class="time">2019-01-06 21:38</span> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/a5/51/7773d421.jpg" class="avatar"> <div class="info"> <div class="hd"><span class="username">峰</span> </div> <div class="bd">递归的写法：<br>这里举例了凑成11元的最少币数<br>import java.util.*;<br><br>public class MinCoins {<br>	public static int[] arr={7,3,2};<br>	public static int minNum=Integer.MAX_VALUE;<br>	public static HashMap&lt;Integer,Integer&gt; min_map=new HashMap&lt;Integer,Integer&gt;();<br> public static void main(String []args) {<br> System.out.println(&quot;Coins:&quot;+Arrays.toString(arr));<br> minCoins(0,11,new HashMap&lt;Integer,Integer&gt;());<br> System.out.println(&quot;MinCoins:&quot;);<br> for (Map.Entry&lt;Integer,Integer&gt;entry:min_map.entrySet()){<br> System.out.println(entry.getKey()+&quot;:&quot;+entry.getValue());<br> }<br> }<br>	<br>	public static void minCoins(int index,int aim,HashMap&lt;Integer,Integer&gt; map){<br> if(index==arr.length||aim==0){<br> if(aim==0){<br> int num=0;<br> for (Integer value:map.values())<br> num+=value;<br> if(num&lt;minNum) min_map=map;<br> }<br> return;<br> }<br> for(int i=0;arr[index]*i&lt;=aim;i++){<br> HashMap&lt;Integer,Integer&gt; new_map=(HashMap&lt;Integer,Integer&gt;)map.clone();<br> new_map.put(arr[index],i);<br> minCoins(index+1,aim-arr[index]*i,new_map);<br> }<br>	}<br>} <br></div> <span class="time">2019-01-04 16:53</span> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/d9/0a/ce61e397.jpg" class="avatar"> <div class="info"> <div class="hd"><span class="username">石佳佳_Gemtra</span> </div> <div class="bd">思考题：<br>对于总金额固定、找出最少钱币数的题目，应该尽可能的使用面额较大的钱币；<br>维护一个钱币面额的数组，对数组进行降序排序，遍历数组，总金额对第一个数组元素整除值为a0，对第一个数组元素取模后的值继续对第二个数组元素整除值为a1...直至到某一个数组元素i取模值为0，则a0+a1+…+ai的值即为最少钱币数；<br>那么请教下老师，这种属于什么方法？ <br></div> <span class="time">2019-01-04 09:06</span> <div class="reply"> <div class="reply-hd"><span>作者回复</span></div> <p class="reply-content">这种属于贪心法，前面有读者说了，这种方法不一定能求出解</p> <p class="reply-time">2019-01-05 09:02</p> </div> </div> </li> <li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJOc0n02eNKflX5ey4TYl1NBfb0kicc20AgayEAGDYylalqHnLTeqMnaJ2iaZsLVmqEo0T0YViadU9Ig/132" class="avatar"> <div class="info"> <div class="hd"><span class="username">lianlian</span> </div> <div class="bd">老师早上好( ^_^)／，在第一题求r的时候，条件判断语句应该是a.charAt(i+1) != b.charAt(j+1)吧😄 ？ <br></div> <span class="time">2019-01-04 08:20</span> <div class="reply"> <div class="reply-hd"><span>作者回复</span></div> <p class="reply-content">应该是i和j没错，只是这里的i和j对应于d[i+1][j+1]。这里比较容易让人混淆，主要是因为d中的0下表表示的是空串，而不是字符串中的第一个字符。我之后将代码注释加一下</p> <p class="reply-time">2019-01-05 09:10</p> </div> </div> </li> </ul> </div> </div> </div> </div> </body> </html>